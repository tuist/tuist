---
{
  "title": "Authentication",
  "titleTemplate": ":title | Server | Guides | Tuist",
  "description": "Learn how to authenticate with the Tuist server from the CLI."
}
---
# المصادقة {#authentication}

للتفاعل مع الخادم، تحتاج CLI إلى مصادقة الطلبات باستخدام [مصادقة حامل
الشهادة](https://swagger.io/docs/specification/authentication/bearer-authentication/).
تدعم CLI المصادقة كمستخدم أو كحساب أو باستخدام رمز OIDC.

## كمستخدم {#as-a-user}

عند استخدام CLI محليًا على جهازك، نوصي بالمصادقة كمستخدم. للمصادقة كمستخدم،
تحتاج إلى تشغيل الأمر التالي:

```bash
tuist auth login
```

سيأخذك الأمر إلى عملية مصادقة عبر الويب. بمجرد المصادقة، سيخزن CLI رمز تحديث
طويل الأمد ورمز وصول قصير الأمد تحت `~/.config/tuist/credentials`. يمثل كل ملف
في الدليل المجال الذي قمت بالمصادقة عليه، والذي يجب أن يكون افتراضيًا
`tuist.dev.json`. المعلومات المخزنة في هذا الدليل حساسة، لذا **تأكد من الحفاظ
عليها آمنة**.

ستقوم CLI تلقائيًا بالبحث عن بيانات الاعتماد عند إرسال الطلبات إلى الخادم. إذا
انتهت صلاحية رمز الوصول، فستستخدم CLI رمز التحديث للحصول على رمز وصول جديد.

## رموز OIDC المميزة {#oidc-tokens}

بالنسبة لبيئات CI التي تدعم OpenID Connect (OIDC)، يمكن لـ Tuist المصادقة
تلقائيًا دون الحاجة إلى إدارة أسرار طويلة الأمد. عند التشغيل في بيئة CI مدعومة،
سيكتشف CLI تلقائيًا مزود رمز OIDC ويستبدل الرمز المقدم من CI برمز وصول Tuist.

### مزودو خدمات CI المدعومون {#supported-ci-providers}

- إجراءات GitHub
- CircleCI
- Bitrise

### إعداد مصادقة OIDC {#setting-up-oidc-authentication}

1. **قم بتوصيل مستودعك بـ Tuist**: اتبع
   <LocalizedLink href="/guides/integrations/gitforge/github">دليل تكامل
   GitHub</LocalizedLink> لتوصيل مستودع GitHub بمشروع Tuist الخاص بك.

2. **قم بتشغيل `tuist auth login`**: في سير عمل CI الخاص بك، قم بتشغيل `tuist
   auth login` قبل أي أوامر تتطلب المصادقة. سيقوم CLI تلقائيًا باكتشاف بيئة CI
   والمصادقة باستخدام OIDC.

انظر دليل التكامل المستمر
<LocalizedLink href="/guides/integrations/continuous-integration">Continuous
Integration guide</LocalizedLink> للحصول على أمثلة للتكوين الخاص بالمزود.

### نطاقات رموز OIDC الرمزية {#oidc-token-scopes}

يتم منح رموز OIDC مجموعة نطاق `ci` ، والتي توفر الوصول إلى جميع المشاريع
المرتبطة بالمستودع. راجع [مجموعات النطاق](#scope-groups) للحصول على تفاصيل حول
ما يشمله نطاق `ci`.

::: tip SECURITY BENEFITS
<!-- -->
تعد مصادقة OIDC أكثر أمانًا من الرموز المميزة طويلة الأمد للأسباب التالية:
- لا توجد أسرار لتدويرها أو إدارتها
- الرموز قصيرة الأجل ومحددة النطاق لتشغيل سير العمل الفردي
- المصادقة مرتبطة بهوية مستودعك
<!-- -->
:::

## الرموز المميزة للحساب {#account-tokens}

بالنسبة لبيئات CI التي لا تدعم OIDC، أو عندما تحتاج إلى تحكم دقيق في الأذونات،
يمكنك استخدام رموز الحساب. تتيح لك رموز الحساب تحديد النطاقات والمشاريع التي
يمكن للرمز الوصول إليها بالضبط.

### إنشاء رمز مميز للحساب {#creating-an-account-token}

```bash
tuist account tokens create my-account \
  --scopes project:cache:read project:cache:write \
  --name ci-cache-token \
  --expires 1y
```

يقبل الأمر الخيارات التالية:

| خيار         | الوصف                                                                                                                                                                             |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `--scopes`   | مطلوب. قائمة النطاقات المفصولة بفواصل لمنح الرمز المميز.                                                                                                                          |
| `--name`     | مطلوب. معرف فريد للرمز (1-32 حرفًا، أحرف أبجدية رقمية وشرطات وشرطات سفلية فقط).                                                                                                   |
| `--expires`  | اختياري. متى ينبغي أن تنتهي صلاحية الرمز المميز. استخدم تنسيقًا مثل `30d` (أيام)، أو `6m` (أشهر)، أو `1y` (سنوات). إذا لم يتم تحديد ذلك، فإن الرمز المميز لا تنتهي صلاحيته أبدًا. |
| `--المشاريع` | قم بتحديد الرمز المميز لمعالجات مشاريع محددة. يتمتع الرمز المميز بإمكانية الوصول إلى جميع المشاريع إذا لم يتم تحديده.                                                             |

### النطاقات المتاحة {#available-scopes}

| النطاق                   | الوصف                                 |
| ------------------------ | ------------------------------------- |
| `account:members:read`   | قراءة أعضاء الحساب                    |
| `account:members:write`  | إدارة أعضاء الحساب                    |
| `account:registry:read`  | اقرأ من سجل حزم Swift                 |
| `account:registry:write` | انشر في سجل حزم Swift                 |
| `project:previews:read`  | تنزيل المعاينات                       |
| `project:previews:write` | تحميل المعاينات                       |
| `project:admin:read`     | اقرأ إعدادات المشروع                  |
| `project:admin:write`    | إدارة إعدادات المشروع                 |
| `project:cache:read`     | تنزيل الملفات الثنائية المخزنة مؤقتًا |
| `project:cache:write`    | تحميل الملفات الثنائية المخزنة مؤقتًا |
| `project:bundles:read`   | عرض الحزم                             |
| `project:bundles:write`  | تحميل الحزم                           |
| `project:tests:read`     | اقرأ نتائج الاختبار                   |
| `project:tests:write`    | تحميل نتائج الاختبار                  |
| `project:builds:read`    | اقرأ تحليلات البنية                   |
| `project:builds:write`   | تحميل تحليلات البنية                  |
| `project:runs:read`      | تشغيل أمر القراءة                     |
| `project:runs:write`     | إنشاء وتحديث عمليات تشغيل الأوامر     |

### مجموعات النطاق {#scope-groups}

توفر مجموعات النطاق طريقة ملائمة لمنح نطاقات متعددة ذات صلة بمعرف واحد. عند
استخدام مجموعة نطاق، يتم توسيعها تلقائيًا لتشمل جميع النطاقات الفردية التي تحتوي
عليها.

| مجموعة النطاق | النطاقات المشمولة                                                                                                                                  |
| ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ci`          | `project:cache:write` ، `project:previews:write` ، `project:bundles:write` ، `project:tests:write` ، `project:builds:write` ، `project:runs:write` |

### التكامل المستمر {#continuous-integration}

بالنسبة لبيئات CI التي لا تدعم OIDC، يمكنك إنشاء رمز حساب باستخدام مجموعة نطاق
`ci` لمصادقة سير عمل CI الخاص بك:

```bash
tuist account tokens create my-account --scopes ci --name ci
```

يؤدي ذلك إلى إنشاء رمز مميز يحتوي على جميع النطاقات اللازمة لعمليات CI النموذجية
(الذاكرة المؤقتة والمعاينات والحزم والاختبارات والبنى والتشغيلات). قم بتخزين
الرمز المميز الذي تم إنشاؤه كسر في بيئة CI الخاصة بك وقم بتعيينه كمتغير بيئة
`TUIST_TOKEN`.

### إدارة الرموز المميزة للحساب {#managing-account-tokens}

لإدراج جميع الرموز المميزة لحساب ما:

```bash
tuist account tokens list my-account
```

لإلغاء رمز مميز بالاسم:

```bash
tuist account tokens revoke my-account ci-cache-token
```

### استخدام الرموز المميزة للحساب {#using-account-tokens}

من المتوقع أن يتم تعريف رموز الحساب كمتغير بيئي `TUIST_TOKEN`:

```bash
export TUIST_TOKEN=your-account-token
```

::: tip WHEN TO USE ACCOUNT TOKENS
<!-- -->
استخدم رموز الحساب عند الحاجة:
- المصادقة في بيئات CI التي لا تدعم OIDC
- تحكم دقيق في العمليات التي يمكن أن يقوم بها الرمز المميز
- رمز مميز يمكنه الوصول إلى عدة مشاريع داخل حساب واحد
- الرموز المحددة المدة التي تنتهي صلاحيتها تلقائيًا
<!-- -->
:::

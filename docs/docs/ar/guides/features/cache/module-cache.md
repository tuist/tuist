---
{
  "title": "Module cache",
  "titleTemplate": ":title · Cache · Features · Guides · Tuist",
  "description": "Optimize your build times by caching compiled binaries and sharing them across different environments."
}
---

# ذاكرة التخزين المؤقت للوحدة النمطية {#module-cache}

::: warning REQUIREMENTS
<!-- -->
- <LocalizedLink href="/guides/features/projects">مشروع تم إنشاؤه</LocalizedLink>
- <LocalizedLink href="/guides/server/accounts-and-projects">حساب ومشروع تويست</LocalizedLink>
<!-- -->
:::

توفر ذاكرة التخزين المؤقت لوحدات Tuist Module Storage طريقة قوية لتحسين أوقات
الإنشاء الخاصة بك عن طريق تخزين وحداتك النمطية كثنائيات (`.xcframework`s)
ومشاركتها عبر بيئات مختلفة. تسمح لك هذه الإمكانية بالاستفادة من الثنائيات التي
تم إنشاؤها مسبقًا، مما يقلل من الحاجة إلى التجميع المتكرر وتسريع عملية التطوير.

## الاحترار {#warming}

يستغل تويست بكفاءة <LocalizedLink href="/guides/features/projects/hashing">يستخدم تجزئة</LocalizedLink> لكل هدف في الرسم البياني للتبعية لاكتشاف التغييرات. وباستخدام هذه البيانات، يقوم بإنشاء وتعيين معرّفات فريدة للثنائيات المشتقة من هذه الأهداف. في وقت إنشاء الرسم البياني، يستبدل تويست الأهداف الأصلية بسلاسة بالنسخ الثنائية المقابلة لها.

تنتج هذه العملية، المعروفة باسم *"التسخين"،* ثنائيات للاستخدام المحلي أو
للمشاركة مع زملاء الفريق وبيئات CI عبر Tuist. عملية تسخين ذاكرة التخزين المؤقت
مباشرة ويمكن أن تبدأ بأمر بسيط:


```bash
tuist cache
```

يعيد الأمر استخدام الثنائيات لتسريع العملية.

## الاستخدام {#usage}

بشكل افتراضي، عندما تستلزم أوامر Tuist إنشاء مشروع، فإنها تستبدل التبعيات
تلقائيًا بمكافئاتها الثنائية من ذاكرة التخزين المؤقت، إذا كانت متوفرة. بالإضافة
إلى ذلك، إذا قمت بتحديد قائمة بالأهداف المراد التركيز عليها، فسيقوم تويست أيضًا
باستبدال أي أهداف تابعة بثنائياتها المخزنة مؤقتًا، شريطة أن تكون متوفرة. بالنسبة
لأولئك الذين يفضلون نهجًا مختلفًا، هناك خيار لإلغاء الاشتراك في هذا السلوك
تمامًا باستخدام علامة محددة:

:::: code-group
```bash [Project generation]
tuist generate # Only dependencies
tuist generate Search # Dependencies + Search dependencies
tuist generate Search Settings # Dependencies, and Search and Settings dependencies
tuist generate --no-binary-cache # No cache at all
```

```bash [Testing]
tuist test
```
<!-- -->
::::

::: warning
<!-- -->
التخزين المؤقت الثنائي هو ميزة مصممة لسير عمل التطوير مثل تشغيل التطبيق على جهاز
محاكاة أو جهاز، أو تشغيل الاختبارات. وهي غير مخصصة لإصدارات الإصدار. عند أرشفة
التطبيق، قم بإنشاء مشروع مع المصادر باستخدام العلامة `--no-binary-cache`.
<!-- -->
:::

## ملفات تعريف ذاكرة التخزين المؤقت {#cache-profiles}

يدعم تويست ملفات تعريف ذاكرة التخزين المؤقت للتحكم في كيفية استبدال الأهداف بقوة
بالثنائيات المخزنة مؤقتًا عند إنشاء المشاريع.

- مدمجة:
  - `خارجي فقط`: استبدال التبعيات الخارجية فقط (افتراضي للنظام)
  - `كل ما يمكن`: استبدال أكبر عدد ممكن من الأهداف (بما في ذلك الأهداف الداخلية)
  - `لا شيء`: لا تستبدل أبدًا بالثنائيات المخزنة مؤقتًا

حدد ملف تعريف باستخدام `- ملف تعريف ذاكرة التخزين المؤقت` على `توليد`:

```bash
# Built-in profiles
tuist generate --cache-profile all-possible

# Custom profiles (defined in Tuist Config)
tuist generate --cache-profile development

# Use config default (no flag)
tuist generate

# Focus on specific targets (implies all-possible)
tuist generate MyModule AnotherTarget

# Disable binary replacement entirely (backwards compatible)
tuist generate --no-binary-cache  # equivalent to --cache-profile none
```

الأسبقية عند حل السلوك الفعال (من الأعلى إلى الأدنى):

1. `--لا يوجد ذاكرة تخزين مؤقت ثنائية` → الملف الشخصي `لا شيء`
2. التركيز على الهدف (تمرير الأهداف إلى `توليد`) → الملف الشخصي `كل شيء ممكن`
3. `--ملف تعريف ذاكرة التخزين المؤقت &lt;القيمة&gt;`
4. التكوين الافتراضي (إذا تم تعيينه)
5. النظام الافتراضي (`فقط-خارجي`)

## المنتجات المدعومة {#supported-products}

المنتجات المستهدفة التالية فقط هي التي يمكن تخزينها مؤقتًا بواسطة Tuist:

- أطر العمل (الثابتة والديناميكية) التي لا تعتمد على [XCTest]
  (https://developer.apple.com/documentation/xctest)
- الحزم
- وحدات ماكرو سويفت

نحن نعمل على دعم المكتبات والأهداف التي تعتمد على XCTest.

::: info UPSTREAM DEPENDENCIES
<!-- -->
عندما يكون الهدف غير قابل للتخزين المؤقت، فإنه يجعل الأهداف الأولية غير قابلة
للتخزين المؤقت أيضًا. على سبيل المثال، إذا كان لديك الرسم البياني التبعي `A &gt;
B` ، حيث يعتمد A على B، إذا كان B غير قابل للتخزين المؤقت، فإن A سيكون غير قابل
للتخزين المؤقت أيضًا.
<!-- -->
:::

## الكفاءة {#efficiency}

يعتمد مستوى الكفاءة التي يمكن تحقيقها باستخدام التخزين المؤقت الثنائي بشكل كبير
على بنية الرسم البياني. لتحقيق أفضل النتائج، نوصي بما يلي:

1. تجنب الرسوم البيانية التبعية المتداخلة جداً. كلما كان الرسم البياني ضحلًا،
   كان ذلك أفضل.
2. عرّف التبعيات بأهداف البروتوكول/الواجهة بدلاً من أهداف التنفيذ، وتطبيقات حقن
   التبعية من الأهداف العليا.
3. قم بتقسيم الأهداف التي يتم تعديلها بشكل متكرر إلى أهداف أصغر يكون احتمال
   تغييرها أقل.

الاقتراحات المذكورة أعلاه هي جزء من <LocalizedLink href="/guides/features/projects/tma-architecture">البنية المعيارية</LocalizedLink>، والتي نقترحها كطريقة لهيكلة مشاريعك لتحقيق أقصى قدر من الفوائد ليس فقط من التخزين المؤقت الثنائي ولكن أيضًا من قدرات Xcode.

## الإعداد الموصى به {#recommended-setup}

نوصي بوجود مهمة CI التي **تعمل في كل التزام في الفرع الرئيسي** لتدفئة ذاكرة
التخزين المؤقت. سيضمن ذلك احتواء ذاكرة التخزين المؤقت دائمًا على ثنائيات
للتغييرات في `الرئيسي` بحيث يتم بناء الفرع المحلي وفرع CI بشكل تدريجي عليها.

::: tip CACHE WARMING USES BINARIES
<!-- -->
ويستفيد الأمر `tuist cache` أيضًا من ذاكرة التخزين المؤقت الثنائية لتسريع عملية
التسخين.
<!-- -->
:::

فيما يلي بعض الأمثلة على عمليات سير العمل الشائعة:

### مطور يبدأ العمل على ميزة جديدة {#a-developer-starts-to-work-on-a-new-feature}

1. ينشئون فرعًا جديدًا من `الرئيسي`.
2. يتم تشغيلها `تويست توليد`.
3. يقوم تويست بسحب أحدث الثنائيات من `الرئيسي` ويُنشئ المشروع بها.

### مطور يدفع بالتغييرات إلى الأعلى {#a-developer-pushes-changes-upstream}

1. سيقوم خط أنابيب CI بتشغيل `xcodebuild build` أو `tuist test` لبناء أو اختبار
   المشروع.
2. سيقوم سير العمل بسحب أحدث الثنائيات من `الرئيسي` وإنشاء المشروع بها.
3. ثم يقوم بعد ذلك ببناء المشروع أو اختباره بشكل تدريجي.

## التكوين {#configuration}

### حد التزامن في ذاكرة التخزين المؤقت {#cache-concurrency-limit}

بشكل افتراضي، يقوم تويست بتنزيل وتحميل القطع الأثرية من ذاكرة التخزين المؤقت دون
أي حد للالتزامن، مما يزيد من الإنتاجية. يمكنك التحكم في هذا السلوك باستخدام
متغير البيئة `TUIST_CACHE_CONCACHE_CONCURRENCY_LIMIT`:

```bash
# Set a specific concurrency limit
export TUIST_CACHE_CONCURRENCY_LIMIT=10
tuist generate

# Use "none" for no limit (default behavior)
export TUIST_CACHE_CONCURRENCY_LIMIT=none
tuist generate
```

يمكن أن يكون هذا مفيداً في البيئات ذات النطاق الترددي المحدود للشبكة أو لتقليل
حمل النظام أثناء عمليات التخزين المؤقت.

## استكشاف الأخطاء وإصلاحها {#troubleshooting}

### لا يستخدم الثنائيات لأهدافي {#it-doesnt-use-binaries-for-my-targets}

تأكد من أن تكون <LocalizedLink href="/guides/features/projects/hashing#debugging">التجزئة حتمية</LocalizedLink> عبر البيئات وعمليات التشغيل. قد يحدث هذا إذا كان المشروع يحتوي على مراجع للبيئة، على سبيل المثال من خلال مسارات مطلقة. يمكنك استخدام الأمر `diff` لمقارنة المشاريع التي تم إنشاؤها بواسطة استدعاءين متتاليين للأمر `tuist توليد` أو عبر البيئات أو عمليات التشغيل.

تأكد أيضًا من أن الهدف لا يعتمد بشكل مباشر أو غير مباشر على هدف <LocalizedLink href="/guides/features/cache/generated-project#supported-products">غير قابل للتخزين المؤقت</LocalizedLink>.

### الرموز المفقودة {#missing-symbols}

عند استخدام المصادر، يمكن لنظام بناء Xcode، من خلال البيانات المشتقة، حل التبعيات التي لم يتم الإعلان عنها صراحةً. ومع ذلك، عند الاعتماد على ذاكرة التخزين المؤقت الثنائي، يجب الإعلان عن التبعيات بشكل صريح؛ وإلا سترى على الأرجح أخطاء في التحويل البرمجي عندما يتعذر العثور على الرموز. لتصحيح هذا الأمر، نوصي باستخدام الأمر <LocalizedLink href="/guides/features/projects/inspect/implicit-dependencies">`tuist فحص الواردات الضمنية`</LocalizedLink> وإعداده في CI لمنع حدوث انحدارات في الربط الضمني.

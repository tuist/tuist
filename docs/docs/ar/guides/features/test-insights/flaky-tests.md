---
{
  "title": "Flaky Tests",
  "titleTemplate": ":title · Test Insights · Features · Guides · Tuist",
  "description": "Automatically detect and track flaky tests in your CI pipelines."
}
---
# اختبارات Flaky {#flaky-tests}

:::: متطلبات التحذير
<!-- -->
- <LocalizedLink href="/guides/features/test-insights">يجب تكوين Test
  Insights</LocalizedLink>
<!-- -->
:::

الاختبارات غير المستقرة هي الاختبارات التي تنتج نتائج مختلفة (نجاح أو فشل) عند
تشغيلها عدة مرات باستخدام نفس الكود. وهي تقوض الثقة في مجموعة الاختبارات الخاصة
بك وتضيع وقت المطورين في التحقيق في حالات الفشل الخاطئة. يكتشف Tuist الاختبارات
غير المستقرة تلقائيًا ويساعدك على تتبعها بمرور الوقت.

![صفحة الاختبارات غير
الموثوقة](/images/guides/features/test-insights/flaky-tests-page.png)

## كيف يعمل الكشف عن التقلبات {#how-it-works}

يكتشف Tuist الاختبارات غير الدقيقة بطريقتين:

### إعادة محاولة الاختبار {#test-retries}

عند إجراء الاختبارات باستخدام وظيفة إعادة المحاولة في Xcode (باستخدام
`-retry-tests-on-failure` أو `-test-iterations`)، يقوم Tuist بتحليل نتائج كل
محاولة. إذا فشل الاختبار في بعض المحاولات ونجح في محاولات أخرى، يتم وضع علامة
عليه على أنه غير مستقر.

على سبيل المثال، إذا فشل الاختبار في المحاولة الأولى ولكن نجح في المحاولة
الثانية، يسجل Tuist هذا على أنه اختبار غير موثوق.

```sh
tuist xcodebuild test \
  -scheme MyScheme \
  -retry-tests-on-failure \
  -test-iterations 3
```

![تفاصيل حالة الاختبار غير
الموثوقة](/images/guides/features/test-insights/flaky-test-case-detail.png)

### الكشف عن التداخل {#cross-run-detection}

حتى بدون إعادة الاختبار، يمكن لـ Tuist اكتشاف الاختبارات غير المستقرة من خلال
مقارنة النتائج عبر عمليات CI مختلفة على نفس الالتزام. إذا نجح الاختبار في عملية
CI واحدة ولكنه فشل في عملية أخرى لنفس الالتزام، يتم وضع علامة على كلتا العمليتين
على أنهما غير مستقرتين.

هذا مفيد بشكل خاص للكشف عن الاختبارات غير المستقرة التي لا تفشل بشكل متسق بما
يكفي ليتم اكتشافها من خلال إعادة المحاولة، ولكنها لا تزال تسبب فشلًا متقطعًا في
التكامل المستمر.

## إدارة الاختبارات غير الموثوقة {#managing-flaky-tests}

### المسح التلقائي

يقوم Tuist تلقائيًا بمسح علامة عدم الاستقرار من الاختبارات التي لم تكن غير
مستقرة لمدة 14 يومًا. وهذا يضمن أن الاختبارات التي تم إصلاحها لا تظل مميزة على
أنها غير مستقرة إلى أجل غير مسمى.

### الإدارة اليدوية

يمكنك أيضًا وضع علامة أو إزالة علامة يدويًا على الاختبارات على أنها غير موثوقة
من صفحة تفاصيل حالة الاختبار. وهذا مفيد في الحالات التالية:
- تريد الإقرار باختبار غير موثوق به أثناء العمل على إصلاحه
- تم وضع علامة خاطئة على اختبار بسبب مشكلات في البنية التحتية

## إشعارات Slack {#slack-notifications}

احصل على إشعار فوري عندما يصبح الاختبار غير مستقر عن طريق إعداد
<LocalizedLink href="/guides/integrations/slack#flaky-test-alerts">تنبيهات
الاختبار غير المستقر</LocalizedLink> في تكامل Slack الخاص بك.

---
{
  "title": "Releases",
  "titleTemplate": ":title | Contributors | Tuist",
  "description": "Learn how Tuist's continuous release process works"
}
---
# الإصدارات

يستخدم Tuist نظام إصدار مستمر ينشر تلقائيًا الإصدارات الجديدة كلما تم دمج
تغييرات مهمة في الفرع الرئيسي. يضمن هذا النهج وصول التحسينات إلى المستخدمين
بسرعة دون تدخل يدوي من قبل المسؤولين عن الصيانة.

## نظرة عامة

نقوم بإصدار ثلاثة مكونات رئيسية بشكل مستمر:
- **Tuist CLI** - أداة سطر الأوامر
- **خادم Tuist** - الخدمات الخلفية
- **تطبيق Tuist** - يتم نشر تطبيقات macOS و iOS (يتم نشر تطبيق iOS بشكل مستمر
  على TestFlight فقط، اقرأ المزيد [هنا](#app-store-release)

لكل مكون مسار إصدار خاص به يتم تشغيله تلقائيًا عند كل دفع إلى الفرع الرئيسي.

## كيف يعمل

### 1. التزام بالقواعد

نستخدم [التزامات تقليدية](https://www.conventionalcommits.org/) لتنظيم رسائل
الالتزامات الخاصة بنا. وهذا يسمح لأدواتنا بفهم طبيعة التغييرات وتحديد ترقيات
الإصدارات وإنشاء سجلات التغييرات المناسبة.

التنسيق: `النوع (النطاق): الوصف`

#### أنواع الالتزامات وتأثيرها

| اكتب          | الوصف                     | تأثير الإصدار               | مثال على ذلك                                              |
| ------------- | ------------------------- | --------------------------- | --------------------------------------------------------- |
| `feat`        | ميزة أو إمكانية جديدة     | ترقية طفيفة للإصدار (x.Y.z) | `feat(cli): إضافة دعم لـ Swift 6`                         |
| `إصلاح`       | إصلاح الأخطاء             | ترقية إصدار التصحيح (x.y.Z) | `إصلاح (التطبيق): حل مشكلة تعطل التطبيق عند فتح المشاريع` |
| `docs`        | تغييرات في الوثائق        | لا إصدار                    | `المستندات: تحديث دليل التثبيت`                           |
| `النمط`       | تغييرات في نمط الكود      | لا إصدار                    | `النمط: تنسيق الكود باستخدام swiftformat`                 |
| `إعادة هيكلة` | إعادة هيكلة الكود         | لا إصدار                    | `إعادة هيكلة (الخادم): تبسيط منطق المصادقة`               |
| `perf`        | تحسينات في الأداء         | ترقية إصدار التصحيح         | `perf(cli): تحسين حل التبعية`                             |
| `اختبار`      | اختبار الإضافات/التغييرات | لا إصدار                    | `اختبار: أضف اختبارات وحدة للذاكرة المؤقتة`               |
| `مهمة`        | مهام الصيانة              | لا إصدار                    | `المهمة: تحديث التبعيات`                                  |
| `ci`          | تغييرات CI/CD             | لا إصدار                    | `ci: إضافة سير عمل للإصدارات`                             |

#### تغييرات جذرية

تؤدي التغييرات الجذرية إلى تغيير كبير في الإصدار (X.0.0) ويجب الإشارة إليها في
نص الالتزام:

```
feat(cli): change default cache location

BREAKING CHANGE: The cache is now stored in ~/.tuist/cache instead of .tuist-cache.
Users will need to clear their old cache directory.
```

### 2. اكتشاف التغييرات

يستخدم كل مكون [git cliff](https://git-cliff.org/) من أجل:
- تحليل الالتزامات منذ الإصدار الأخير
- تصفية الالتزامات حسب النطاق (cli، app، server)
- حدد ما إذا كانت هناك تغييرات قابلة للإصدار
- إنشاء سجلات التغييرات تلقائيًا

### 3. إصدار خط الأنابيب

عند اكتشاف تغييرات قابلة للنشر:

1. **حساب الإصدار**: يحدد خط الأنابيب رقم الإصدار التالي
2. **إنشاء سجل التغييرات**: يقوم git cliff بإنشاء سجل التغييرات من رسائل
   الالتزام
3. **عملية البناء**: يتم بناء المكون واختباره
4. **إنشاء إصدار**: يتم إنشاء إصدار GitHub مع عناصر
5. **التوزيع**: يتم دفع التحديثات إلى مديري الحزم (على سبيل المثال، Homebrew لـ
   CLI)

### 4. تصفية النطاق

لا يتم إصدار كل مكون إلا عندما يكون هناك تغييرات ذات صلة:

- **CLI**: الالتزامات باستخدام `(cli)` scope أو بدون نطاق
- ****: التزامات مع (app) scope ``
- **الخادم**: الالتزامات مع `(الخادم)` النطاق

## كتابة رسائل التزام جيدة

نظرًا لأن رسائل الالتزام تؤثر بشكل مباشر على ملاحظات الإصدار، فمن المهم كتابة
رسائل واضحة ووصفية:

### افعل:
- استخدم صيغة المضارع: "إضافة ميزة" وليس "ميزة مضافة"
- كن موجزًا ولكن وصفًا
- قم بتضمين النطاق عندما تكون التغييرات خاصة بمكونات معينة
- مشكلات مرجعية عند الاقتضاء: `fix(cli): حل مشكلة ذاكرة التخزين المؤقتة للبناء
  (#1234)`

### لا تفعل:
- استخدم عبارات غامضة مثل "إصلاح الخلل" أو "تحديث الكود"
- امزج عدة تغييرات غير مرتبطة ببعضها في عملية التسجيل الواحدة
- نسيان تضمين معلومات التغيير الجذري

### تغييرات جذرية

بالنسبة للتغييرات الجذرية، أدرج `BREAKING CHANGE:` في نص الالتزام:

```
feat(cli): change cache directory structure

BREAKING CHANGE: Cache files are now stored in a new directory structure.
Users need to clear their cache after updating.
```

## إصدار سير العمل

يتم تحديد سير عمل الإصدار في:
- `.github/workflows/cli-release.yml` - إصدارات CLI
- `.github/workflows/app-release.yml` - إصدارات التطبيق
- `.github/workflows/server-release.yml` - إصدارات الخادم

كل سير عمل:
- يعمل عند الضغط على main
- يمكن تشغيله يدويًا
- يستخدم git cliff لاكتشاف التغييرات
- يتولى عملية الإصدار بأكملها

## مراقبة الإصدارات

يمكنك مراقبة الإصدارات من خلال:
- [صفحة إصدارات GitHub](https://github.com/tuist/tuist/releases)
- علامة التبويب GitHub Actions لتشغيل سير العمل
- ملفات سجل التغييرات في كل دليل مكون

## الفوائد

يوفر نهج الإصدار المستمر ما يلي:

- **تسليم سريع**: تصل التغييرات إلى المستخدمين فور دمجها
- **تقليل الاختناقات**: لا داعي للانتظار حتى يتم الإصدار يدويًا
- ****: سجلات التغييرات التلقائية من رسائل الالتزام
- **عملية متسقة**: نفس مسار الإصدار لجميع المكونات
- **ضمان الجودة**: يتم إصدار التغييرات التي تم اختبارها فقط

## حل المشكلات

في حالة فشل الإصدار:

1. تحقق من سجلات GitHub Actions لمعرفة سير العمل الفاشل.
2. تأكد من أن رسائل الالتزام تتبع التنسيق التقليدي
3. تحقق من اجتياز جميع الاختبارات
4. تحقق من أن المكون تم إنشاؤه بنجاح

للتصحيحات العاجلة التي تحتاج إلى إصدار فوري:
1. تأكد من أن التزامك له نطاق واضح
2. بعد الدمج، راقب سير عمل الإصدار
3. إذا لزم الأمر، قم بتشغيل الإصدار اليدوي

## إصدار متجر التطبيقات

بينما يتبع CLI والخادم عملية الإصدار المستمر الموضحة أعلاه، فإن تطبيق iOS ****
يعد استثناءً بسبب عملية مراجعة متجر تطبيقات Apple:

- **الإصدارات اليدوية**: تتطلب إصدارات تطبيقات iOS تقديمًا يدويًا إلى متجر
  التطبيقات
- **تأخيرات المراجعة**: يجب أن يخضع كل إصدار لعملية مراجعة Apple، والتي قد
  تستغرق من 1 إلى 7 أيام.
- **التغييرات المجمعة**: عادةً ما يتم تجميع التغييرات المتعددة معًا في كل إصدار
  من إصدارات iOS.
- **TestFlight**: قد يتم توزيع الإصدارات التجريبية عبر TestFlight قبل إصدارها في
  App Store.
- **ملاحظات الإصدار**: يجب أن تكون مكتوبة خصيصًا وفقًا لإرشادات متجر التطبيقات

لا يزال تطبيق iOS يتبع نفس قواعد الالتزام ويستخدم git cliff لإنشاء سجل
التغييرات، ولكن الإصدار الفعلي للمستخدمين يتم وفقًا لجدول زمني يدوي أقل تكرارًا.

---
{
  "title": "Slack",
  "titleTemplate": ":title | Integrations | Guides | Tuist",
  "description": "Learn how to integrate Tuist with Slack."
}
---
# Интеграция со Slack {#slack}

Если ваша организация использует Slack, вы можете интегрировать Tuist, чтобы
получать аналитическую информацию прямо в своих каналах. Таким образом,
мониторинг превращается из задачи, о которой ваша команда должна помнить, в
процесс, который происходит автоматически. Например, ваша команда может получать
ежедневные сводки о производительности сборки, частоте попаданий в кэш или
тенденциях размера пакетов.

## Настройка {#setup}

### Подключите свое рабочее пространство Slack {#connect-workspace}

`Сначала подключите свое рабочее пространство Slack к учетной записи Tuist на
вкладке «Интеграции»`:

![Изображение, на котором показана вкладка «Интеграции» с подключением к
Slack](/images/guides/integrations/slack/integrations.png)

Нажмите « **» (Подключить Slack) «** » (Подключить Slack), чтобы разрешить Tuist
публиковать сообщения в вашем рабочем пространстве. Вы будете перенаправлены на
страницу авторизации Slack, где сможете утвердить подключение.

> [!ПРИМЕЧАНИЕ] УТВЕРЖДЕНО АДМИНИСТРАТОРОМ SLACK
> <!-- -->
> Если в вашем рабочем пространстве Slack ограничена установка приложений, вам
> может потребоваться запросить разрешение у администратора Slack. Slack
> проведет вас через процесс запроса разрешения во время авторизации.
> <!-- -->

### Отчеты по проектам {#project-reports}

После подключения Slack настройте отчеты для каждого проекта на вкладке
«Уведомления» в настройках проекта:

![Изображение, на котором показаны настройки уведомлений с конфигурацией отчетов
Slack](/images/guides/integrations/slack/notifications-settings.png)

Вы можете настроить:
- **Канал**: выберите, какой канал Slack будет получать отчеты.
- **Расписание**: выберите дни недели, в которые вы хотите получать отчеты.
- **Время**: Установите время суток

> [!ПРЕДУПРЕЖДЕНИЕ] ЧАСТНЫЕ КАНАЛЫ
> <!-- -->
> Чтобы приложение Tuist Slack могло публиковать сообщения в частном канале,
> сначала необходимо добавить бота Tuist в этот канал. В Slack откройте частный
> канал, нажмите на название канала, чтобы открыть настройки, выберите
> «Интеграции», затем «Добавить приложения» и найдите Tuist.
> <!-- -->

После настройки Tuist ежедневно отправляет автоматические отчеты в выбранный
вами канал Slack:

<img src="/images/guides/integrations/slack/report.png" alt="An image that shows a Slack report message" style="max-width: 500px;" />

### Правила оповещений {#alert-rules}

Получайте уведомления в Slack с помощью правил оповещения, когда ключевые
показатели значительно ухудшаются, чтобы как можно скорее обнаружить замедление
сборки, ухудшение кэша или замедление тестирования, минимизируя влияние на
производительность вашей команды.

Чтобы создать правило оповещения, перейдите в настройки уведомлений вашего
проекта и нажмите « **» (Настройки уведомлений). Добавьте правило оповещения «**
» (Настройки уведомлений):

Вы можете настроить:
- **Название**: описательное название оповещения
- **Категория**: Что измерять (продолжительность сборки, продолжительность
  тестирования или коэффициент попадания в кэш)
- **Метрика**: как агрегировать данные (p50, p90, p99 или среднее значение)
- **Отклонение**: процентное изменение, которое вызывает оповещение.
- ****: количество последних запусков для сравнения
- **Канал Slack**: Куда отправлять оповещения

Например, вы можете создать оповещение, которое срабатывает, когда
продолжительность сборки p90 увеличивается более чем на 20% по сравнению с
предыдущими 100 сборками.

Когда срабатывает оповещение, вы получите сообщение, подобное этому, в своем
канале Slack:

<img src="/images/guides/integrations/slack/alert.png" alt="An image that shows a Slack alert message" style="max-width: 500px;" />

> [!ПРИМЕЧАНИЕ] ПЕРИОД ОХЛАЖДЕНИЯ
> <!-- -->
> После срабатывания предупреждения оно не будет срабатывать снова по тому же
> правилу в течение 24 часов. Это предотвращает усталость от уведомлений, когда
> показатель остается повышенным.
> <!-- -->

### Ненадежные тестовые оповещения {#flaky-test-alerts}

Получайте мгновенные уведомления, когда тест становится нестабильным. В отличие
от правил оповещения на основе метрик, которые сравнивают скользящие окна,
оповещения о нестабильных тестах срабатывают в момент, когда Tuist обнаруживает
новый нестабильный тест, помогая вам уловить нестабильность теста до того, как
она повлияет на вашу команду.

Чтобы создать правило оповещения о нестабильном тесте, перейдите в настройки
уведомлений вашего проекта и нажмите « **» (Создать правило оповещения о
нестабильном тесте). Добавление правила оповещения о нестабильном тесте**:

Вы можете настроить:
- **Название**: описательное название оповещения
- **Порог срабатывания**: минимальное количество нестабильных запусков за
  последние 30 дней, необходимое для срабатывания предупреждения.
- **Канал Slack**: Куда отправлять оповещения

Когда тест становится нестабильным и достигает вашего порога, вы получите
уведомление с прямой ссылкой для изучения тестового случая:

<img src="/images/guides/integrations/slack/flaky-test-alert.png" alt="An image that shows a Slack flaky test alert message" style="max-width: 500px;" />

## Локальные установки {#on-premise}

Для локальных установок Tuist вам необходимо создать собственное приложение
Slack и настроить необходимые переменные среды.

### Создайте приложение Slack {#create-slack-app}

1. Перейдите на страницу [Slack API Apps](https://api.slack.com/apps) и нажмите
   « **» (Создать новое приложение).**
2. Выберите « **» (Установить приложение) в манифесте приложения** и выберите
   рабочую область, в которую вы хотите установить приложение.
3. Вставьте следующий манифест, заменив URL-адрес перенаправления на URL-адрес
   вашего сервера Tuist:

```json
{
    "display_information": {
        "name": "Tuist",
        "description": "Get regular updates and alerts for your builds, tests, and caching.",
        "background_color": "#6f2cff"
    },
    "features": {
        "bot_user": {
            "display_name": "Tuist",
            "always_online": false
        }
    },
    "oauth_config": {
        "redirect_urls": [
            "https://your-tuist-server.com/integrations/slack/callback"
        ],
        "scopes": {
            "bot": [
                "chat:write",
                "chat:write.public"
            ]
        }
    },
    "settings": {
        "org_deploy_enabled": false,
        "socket_mode_enabled": false,
        "token_rotation_enabled": false
    }
}
```

4. Проверьте и создайте приложение

### Настройте переменные среды {#configure-environment}

Установите следующие переменные окружения на вашем сервере Tuist:

- `SLACK_CLIENT_ID` - Идентификатор клиента со страницы «Основная информация»
  вашего приложения Slack.
- `SLACK_CLIENT_SECRET` - Секретный ключ клиента со страницы «Основная
  информация» вашего приложения Slack.

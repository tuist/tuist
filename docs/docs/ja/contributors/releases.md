---
{
  "title": "Releases",
  "titleTemplate": ":title | Contributors | Tuist",
  "description": "Learn how Tuist's continuous release process works"
}
---
# リリース

Tuistは継続的リリースシステムを採用しており、メインブランチに意味のある変更がマージされるたびに自動的に新バージョンを公開します。このアプローチにより、改善点がメンテナンス担当者による手動介入なしに迅速にユーザーに届くことが保証されます。

## 概要

私たちは継続的に3つの主要コンポーネントをリリースしています：
- **Tuist CLI** - コマンドラインツール
- **Tuist Server** - バックエンドサービス
- **Tuist App** -
  macOSおよびiOSアプリ（iOSアプリはTestFlightへの継続的デプロイのみ実施中、詳細は[こちら](#app-store-release)を参照）

各コンポーネントには独自のリリースパイプラインがあり、メインブランチへのプッシュごとに自動的に実行されます。

## 仕組み

### 1. コミット規約

コミットメッセージの構造化には[Conventional
Commits](https://www.conventionalcommits.org/)を採用しています。これによりツールが変更内容を理解し、バージョンアップを判断し、適切な変更履歴を生成できます。

フォーマット:`タイプ(スコープ): 説明`

#### コミットの種類とその影響

| 入力         | 説明          | バージョン影響              | 例                               |
| ---------- | ----------- | -------------------- | ------------------------------- |
| `feat`     | 新機能または新機能   | マイナーバージョンアップ (x.Y.z) | `feat(cli): Swift 6のサポートを追加`    |
| `修正`       | バグ修正        | パッチバージョンの更新 (x.y.Z)  | `fix(app): プロジェクトを開く際のクラッシュを修正` |
| `docs`     | ドキュメントの変更点  | リリースなし               | `docs: インストールガイドを更新`            |
| `スタイル`     | コードスタイルの変更  | リリースなし               | `style: コードはswiftformatでフォーマット` |
| `リファクタリング` | コードリファクタリング | リリースなし               | `refactor(server): 認証ロジックを簡素化`  |
| `perf`     | パフォーマンスの改善  | パッチバージョンの更新          | `perf(cli): 依存関係解決の最適化`         |
| `test`     | 追加/変更のテスト   | リリースなし               | `テスト: キャッシュのユニットテストを追加`         |
| `chore`    | 保守作業        | リリースなし               | `chore: 依存関係を更新する`              |
| `ci`       | CI/CDの変更    | リリースなし               | `ci: リリース用ワークフローを追加`            |

#### 重大な変更

互換性のない変更はメジャーバージョンアップ（X.0.0）を引き起こし、コミット本文に明記する必要があります：

```
feat(cli): change default cache location

BREAKING CHANGE: The cache is now stored in ~/.tuist/cache instead of .tuist-cache.
Users will need to clear their old cache directory.
```

### 2. 変更検出

各コンポーネントは[git cliff](https://git-cliff.org/)を使用して以下を行います：
- 前回のリリース以降のコミットを分析する
- コミットをスコープ（CLI、アプリ、サーバー）でフィルタリングする
- リリース可能な変更があるかどうかを判断する
- 変更履歴を自動生成する

### 3. リリースパイプライン

リリース可能な変更が検出された場合：

1. **バージョン計算**: パイプラインが次のバージョン番号を決定します
2. **変更履歴生成**: git cliff がコミットメッセージから変更履歴を生成します
3. **ビルドプロセス**: コンポーネントのビルドとテストを実施
4. **リリース作成**: GitHub リリースがアーティファクトと共に作成されます
5. **配布方法**: パッケージマネージャー（例: CLI用 Homebrew）に更新がプッシュされます

### 4. スコープフィルタリング

各コンポーネントは関連する変更がある場合にのみリリースする:

- **CLI**: コミット時に`(cli)` scope または no scope を指定
- **App**: コミット内容`(app)` scope
- **Server**: Commits with`(server)` scope

## 良いコミットメッセージの書き方

コミットメッセージはリリースノートに直接影響するため、明確で説明的なメッセージを記述することが重要です：

### Do:
- 現在形を使用：「機能を追加する」ではなく「機能を追加した」
- 簡潔でありながら説明的であること
- 変更がコンポーネント固有の場合はスコープを含める
- 該当する場合の参照情報:`fix(cli): resolve build cache issue (#1234)`

### 禁止事項：
- 「バグ修正」や「コード更新」など曖昧な表現を使用する
- 複数の無関係な変更を1つのコミットにまとめる
- 変更点情報の記載を忘れないでください

### 重大な変更

互換性を損なう変更の場合、コミット本文に`BREAKING CHANGE:` を含めること:

```
feat(cli): change cache directory structure

BREAKING CHANGE: Cache files are now stored in a new directory structure.
Users need to clear their cache after updating.
```

## リリースワークフロー

リリースワークフローは以下で定義されています：
- `.github/workflows/cli-release.yml` - CLI リリース
- `.github/workflows/app-release.yml` - App releases
- `.github/workflows/server-release.yml` - Server releases

各ワークフロー：
- メインブランチへのプッシュ時に実行
- 手動でトリガー可能
- 変更検出にgit cliffを使用
- リリースプロセス全体を管理する

## リリース監視

リリース状況は以下で確認できます：
- [GitHub Releases ページ](https://github.com/tuist/tuist/releases)
- ワークフロー実行用のGitHub Actionsタブ
- 各コンポーネントディレクトリ内の変更履歴ファイル

## メリット

この継続的リリース手法により以下が実現されます：

- **迅速な配信**: 変更はマージ後すぐにユーザーに反映されます
- **ボトルネックの削減**: 手動リリース待ちなし
- **明確なコミュニケーション**: コミットメッセージからの自動変更履歴
- **一貫したプロセス**: 全コンポーネント共通のリリースフロー
- **品質保証**: テスト済みの変更のみリリースされます

## トラブルシューティング

リリースが失敗した場合：

1. 失敗したワークフローについてはGitHub Actionsのログを確認してください
2. コミットメッセージは標準形式に従うようにしてください
3. すべてのテストが通過することを確認してください
4. コンポーネントが正常にビルドされることを確認してください

緊急修正が必要な場合：
1. コミットの範囲を明確にすること
2. マージ後はリリースワークフローを監視する
3. 必要に応じて手動リリースを実行してください

## App Storeリリース

CLIとサーバーは上記の継続的リリースプロセスに従いますが、**のiOSアプリ** はAppleのApp Store審査プロセスのため例外となります：

- **手動リリース**: iOSアプリのリリースにはApp Storeへの手動提出が必要です
- **** の審査遅延：各リリースはAppleの審査プロセスを経る必要があり、1～7日かかる場合があります
- **バッチ処理された変更点**: 複数の変更点は通常、各iOSリリースでまとめて提供されます
- **TestFlight**: ベータ版はApp Storeリリース前にTestFlight経由で配布される場合があります
- **リリースノート**: App Storeガイドラインに準拠した形式で記述すること

iOSアプリは依然として同じコミット規約に従い、変更履歴生成にgit
cliffを使用していますが、ユーザーへの実際のリリースはより頻度の低い手動スケジュールで行われます。
